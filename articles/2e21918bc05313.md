---
title: " ã€Androidã€‘Jetpack Composeã§å®Ÿç¾ã™ã‚‹Splash Screenã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼†åˆæœŸåŒ–å‡¦ç†"
emoji: "ğŸ¨"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  - "android"
  - "kotlin"
  - "jetpackcompose"
  - "splashscreen"
published: true
---
# æ¦‚è¦
Androidã‚¢ãƒ—ãƒªé–‹ç™ºã§ Jetpack Compose ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹éš›ã€Splash Screen ã‚’ã©ã®ã‚ˆã†ã«å®Ÿè£…ã™ã‚Œã°è‰¯ã„ã‹ã¡ã‚ƒã‚“ã¨èª¿ã¹ã‚‰ã‚Œã¦ã„ãªã‹ã£ãŸã®ã§ã€æœ¬è¨˜äº‹ã§ã¯ã€Splash Screen ã®å®Ÿè£…æ–¹æ³•ã«åŠ ãˆã€è¡¨ç¤ºä¸­ã«åˆæœŸåŒ–å‡¦ç†ã‚’è¡Œã†æ–¹æ³•ã«ã¤ã„ã¦ã‚‚ã€å®Ÿéš›ã«è©¦ã—ãŸéš›ã®çŸ¥è¦‹ã‚’ã‚‚ã¨ã«ã—ãŸè¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚

## ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢ã®è¨­å®š

https://developer.android.com/develop/ui/views/launch/splash-screen?hl=ja

- Android 12 ä»¥é™ã§ã¯ [SplashScreen API](https://developer.android.com/reference/android/window/SplashScreen)ã‚’ä½¿ã†ã‚ˆã†ã«ãªã£ãŸ
- SplashScreen API äº’æ›æ€§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹
- ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢ã®ä»•çµ„ã¿
  - [ã‚³ãƒ¼ãƒ«ãƒ‰ ã‚¹ã‚¿ãƒ¼ãƒˆ](https://developer.android.com/topic/performance/vitals/launch-time?hl=ja#cold) ã¾ãŸã¯ [ã‚¦ã‚©ãƒ¼ãƒ  ã‚¹ã‚¿ãƒ¼ãƒˆ](https://developer.android.com/topic/performance/vitals/launch-time?hl=ja#warm) æ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒ—ãƒªã‚’èµ·å‹•
  - å®šç¾©ã—ãŸãƒ†ãƒ¼ãƒã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢ãŒè¡¨ç¤º
  - ã‚¢ãƒ—ãƒªã®æº–å‚™ãŒæ•´ã†ã¨ã€ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢ãŒé–‰ã˜ã¦ã‚¢ãƒ—ãƒªãŒè¡¨ç¤º

# å‹•ä½œç’°å¢ƒ

- Android Studio Ladybug | 2024.2.1 Patch 2
- MBA M3 Sonoma 14.6.1
- kotlin 2.1.0
- compose-bom 2025.02.00

# ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

æ—©é€ŸAndroidStudioã‚’èµ·å‹•ã—ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¦ã„ãã¾ã™ã€‚

- ã€ŒNew Projectã€ã‹ã‚‰ã€ŒEmpty Activityã€ã‚’é¸æŠ
    ![image1.png](/images/2e21918bc05313/image1.png =500x)
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã¯ã€ŒSplashSampleã€ã¨ã—ã¦ä»¥ä¸‹å†…å®¹ã§ä½œæˆã—ã¾ã—ãŸ
    ![image2.png](/images/2e21918bc05313/image2.png =500x)

ä½œæˆæ™‚ç‚¹ã§ã®Splash Screenã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

![image3.gif](/images/2e21918bc05313/image3.gif =300x)

## å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

`gradle/libs.versions.toml` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```toml
[versions]
splashscreen = "1.0.1"

[libraries]
androidx-core-splashscreen = { group = "androidx.core", name = "core-splashscreen", version.ref = "splashscreen" }
```

`app/build.gradle.kts` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```kotlin
dependencies {
  implementation(libs.androidx.core.splashscreen)
}
```

â€» core-splashscreenã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ğŸ‘‡ã§ç¢ºèªã§ãã¾ã™ã€‚

https://mvnrepository.com/artifact/androidx.core/core-splashscreen

# Splash Screenã®è¦ç´ 

![image4.png](/images/2e21918bc05313/image4.png)

â‘ : ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³ã¯ãƒ™ã‚¯ã‚¿ãƒ¼å‹ãƒ‰ãƒ­ãƒ¼ã‚¢ãƒ–ãƒ«ãŒæ¨å¥¨ã•ã‚Œã‚‹

https://developer.android.com/develop/ui/views/graphics/vector-drawable-resources?hl=ja

- ãƒ™ã‚¯ã‚¿ãƒ¼å‹ãƒ‰ãƒ­ãƒ¼ã‚¢ãƒ–ãƒ«ã«ã¯ä»¥ä¸‹2ç¨®é¡å­˜åœ¨ã™ã‚‹
  - VectorDrawable
  - AnimatedVectorDrawable
- ãƒ™ã‚¯ã‚¿ãƒ¼å‹ãƒ‰ãƒ­ãƒ¼ã‚¢ãƒ–ãƒ«ä»¥å¤–ã«ã‚‚Adaptive Iconã‚„ãã®ä»–ã® Drawableï¼ˆBitmapDrawable ãªã©ï¼‰ã‚‚åˆ©ç”¨ã§ãã‚‹ãŒæ¨å¥¨å¤–
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆ1,000 ãƒŸãƒªç§’ä»¥ä¸‹ãŒãŠã™ã™ã‚
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ãƒ©ãƒ³ãƒãƒ£ãƒ¼ ã‚¢ã‚¤ã‚³ãƒ³
- [AdaptiveIcon](https://developer.android.com/develop/ui/views/launch/icon_design_adaptive?hl=ja)ã‚‚ä½¿ç”¨ã§ãã‚‹ãŒåˆ¥é€”è¨­å®šãŒå¿…è¦ã ã£ãŸã‚Šã™ã‚‹

â‘¡: ã‚¢ã‚¤ã‚³ãƒ³èƒŒæ™¯

- çœç•¥å¯èƒ½
- AdaptiveIconã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦èƒŒæ™¯ã¨ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãŒååˆ†ã‚ã‚Œã°ã€èƒŒæ™¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹

â‘¢: ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³ã®å¤–å´ 1/3 ãŒãƒã‚¹ã‚¯ã•ã‚Œã‚‹

â‘£: ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦èƒŒæ™¯

# èƒŒæ™¯è‰²ã®å¤‰æ›´

æ—©é€ŸSplash Screenã‚’ã‚«ã‚¹ã‚¿ãƒ ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚ã¾ãšã¯ä¸€ç•ªç°¡å˜ãã†ãªèƒŒæ™¯è‰²ã®å¤‰æ›´ã‚’è©¦ã—ã¦ã¿ã¾ã™

`res/values/themes.xml` ãŒä»¥ä¸‹ã®æ§˜ã«ãªã£ã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="Theme.SplashSample" parent="android:Theme.Material.Light.NoActionBar" />
</resources>
```

ä¸Šè¨˜ã‚’ğŸ‘‡ã®æ§˜ã«ä¿®æ­£ã—ã¾ã™ã€‚

```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="Theme.SplashSample" parent="Theme.SplashScreen">
        <item name="windowSplashScreenBackground">@color/purple_500</item>
        <item name="postSplashScreenTheme">@style/android:Theme.Material.Light.NoActionBar</item>
    </style>
</resources>
```

ã¾ãšãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚ã«ä½œã‚‰ã‚ŒãŸ `Theme.SplashSample` ã‚’ãã®ã¾ã¾ä½¿ã„ã¾ã™ã€‚ `parent` ã‚’ `Theme.SplashScreen` ã«å¤‰æ›´ã—ã€ `postSplashScreenTheme` ã« `Theme.SplashSample` ã® `parent` ã«è¨­å®šã•ã‚Œã¦ã„ãŸå€¤ ( `android:Theme.Material.Light.NoActionBar` ) ã‚’è¨­å®šã—ã¾ã™ã€‚

æœ€å¾Œã« `windowSplashScreenBackground` ã§èƒŒæ™¯è‰²ã‚’å¥½ããªè‰²ã«è¨­å®šã—ã¾ã™ã€‚

ã“ã®æ™‚ç‚¹ã§ã®Splash Screenã¯ğŸ‘‡ã®æ§˜ã«ãªã‚Šã¾ã™ã€‚

![image5.gif](/images/2e21918bc05313/image5.gif =300x)

# ã‚¢ã‚¤ã‚³ãƒ³ã®å¤‰æ›´

## [VectorDrawable](https://developer.android.com/reference/android/graphics/drawable/VectorDrawable)

ã¾ãšã¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç„¡ã—ã®VectorDrawableã‚’è©¦ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

æ—©é€ŸğŸ‘‡ã‚’ `res/drawable/triangle_splash_icon.xml` ã«ä¿å­˜ã—ã¾ã™ã€‚

```xml
<?xml version="1.0" encoding="utf-8"?>
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108">
    <path
        android:name="triangle"
        android:fillColor="#FF5722"
        android:pathData="M54,30 L78,78 H30 Z"/>
</vector>
```

ğŸ‘†ã§ã¯Splashèµ·å‹•æ™‚ã«ã‚·ã‚¹ãƒ†ãƒ å´ã§ä¸­å¿ƒéƒ¨åˆ†ã‚’å††ã«ãƒã‚¹ã‚¯ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ç‚ºã€30dpã®paddingã‚’ä»˜ã‘ã¦ã„ã¾ã™ã€‚

![image6.png](/images/2e21918bc05313/image6.png =300x)

æ¬¡ã« `res/values/themes.xml` ã® `Theme.SplashSample` ã« `windowSplashScreenAnimatedIcon` ã‚’è¿½åŠ ã—ã€å…ˆã»ã©ä½œæˆã—ãŸ `triangle_splash_icon.xml` ã‚’æŒ‡å®šã—ã¾ã™ã€‚

```xml
    <style name="Theme.SplashSample" parent="Theme.SplashScreen">
        ...
        <!-- ä»¥ä¸‹ã‚’è¿½åŠ  -->
        <item name="windowSplashScreenAnimatedIcon">@drawable/triangle_splash_icon</item>
    </style>
```

â€» ã“ã®æ™‚ã« `requires API level 31` ã§æ€’ã‚‰ã‚Œã‚‹å ´åˆã¯ã€minSdkãŒ31ã‚ˆã‚Šä½ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã¨æ€ã†ã®ã§ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã® `Override Resource in values-v31` ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ `res/values-v31/themes.xml` ã‚’ä½œæˆã—ã¦ä¸‹ã•ã„ã€‚

ã“ã®æ™‚ç‚¹ã§ã®Splash Screenã¯ğŸ‘‡ã®æ§˜ã«ãªã‚Šã¾ã™ã€‚

![image7.gif](/images/2e21918bc05313/image7.gif =300x)

## [AnimatedVectorDrawable](https://developer.android.com/reference/android/graphics/drawable/AnimatedVectorDrawable)

æ¬¡ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚ã‚Šã®VectorDrawableã‚’è©¦ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

ã¾ãšã¯ä»Šã ã¨ã™ãã«Splash ScreenãŒé–‰ã˜ã¦ã—ã¾ã†ã®ã§ã€ã™ãã«é–‰ã˜ãªã„ã‚ˆã†ã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

`MainActivity.kt` ã«ã™ãã«é–‰ã˜ãªã„æ§˜ã«delayã‚’è¨­å®šã—ã¦ã¿ã¾ã™ã€‚

```kotlin
class MainActivity : ComponentActivity() {
    private var isReady = false // ãƒ•ãƒ©ã‚°è¿½åŠ 
    override fun onCreate(savedInstanceState: Bundle?) {
        // SplashScreen APIã®installSplashScreenã®æˆ»ã‚Šå€¤ã‚’å–å¾—
        val splashScreen = installSplashScreen()
        // isReadyãŒtrueã«ãªã‚‹ã¾ã§è¡¨ç¤ºã—ç¶šã‘ã‚‹
        splashScreen.setKeepOnScreenCondition {
            !isReady
        }
        super.onCreate(savedInstanceState)
        // ...
        // ãƒ•ãƒ©ã‚°ã‚’æ•°ç§’å¾Œã«trueã«æ›´æ–°
        lifecycleScope.launch {
            delay(5000)  // 5ç§’å¾…ã¤
            isReady = true
        }
    }
}

```

å…ˆã»ã©ä½œæˆã—ãŸ `res/drawable/triangle_splash_icon.xml` ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ä¸‰è§’å½¢ã®è‰²ã‚’å¤‰åŒ–ã•ã›ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ `res/animator/splash_icon_animator.xml` ã¨ã—ã¦ä»¥ä¸‹ã®å†…å®¹ã§ä½œæˆã—ã¾ã™ã€‚

```xml
<?xml version="1.0" encoding="utf-8"?>
<objectAnimator xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="3000"
    android:propertyName="fillColor"
    android:valueFrom="#FF5722"
    android:valueTo="#4CAF50"
    android:valueType="intType" />
```

æ¬¡ã«AnimatedVectorDrawableã‚’ä½œæˆã—ã¾ã™ã€‚ `res/drawable/animated_triangle_splash_icon.xml` ã‚’ä»¥ä¸‹ã®å†…å®¹ã§ä½œæˆã—ã¾ã™ã€‚

```xml
<?xml version="1.0" encoding="utf-8"?>
<animated-vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/triangle_splash_icon">
    <target
        android:name="triangle"
        android:animation="@animator/splash_icon_animator" />
</animated-vector>
```

æœ€å¾Œã« `res/values/themes.xml` ã® `windowSplashScreenAnimatedIcon` ã«ä½œæˆã—ãŸ `@drawable/animated_triangle_splash_icon` ã‚’è¨­å®šã—ã¾ã™ã€‚

```xml
    <style name="Theme.SplashSample" parent="Theme.SplashScreen">
        ...
        <!-- ä»¥ä¸‹ã‚’ä¿®æ­£ -->
        <item name="windowSplashScreenAnimatedIcon">@drawable/animated_triangle_splash_icon</item>
    </style>
```

ã“ã‚Œã§ã‚¢ãƒ—ãƒªèµ·å‹•ã™ã‚‹ã¨ğŸ‘‡ã®æ§˜ã«è‰²ãŒå¤‰åŒ–ã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚

![image8.gif](/images/2e21918bc05313/image8.gif =300x)

### çµ‚äº†ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹

`SplashScreen` ã® `setOnExitAnimationListener` ã‚’ä½¿ç”¨ã—ã¦çµ‚äº†æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è‡ªåˆ†ã§å®šç¾©ã™ã‚‹äº‹ã‚‚ã§ãã¾ã™ã€‚

https://developer.android.com/reference/kotlin/androidx/core/splashscreen/SplashScreen#setOnExitAnimationListener(androidx.core.splashscreen.SplashScreen.OnExitAnimationListener)

`MainActivity` ã‚’ä»¥ä¸‹ã®æ§˜ã«ä¿®æ­£ã—ã¾ã™ã€‚

```kotlin
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        val splashScreen = installSplashScreen()
        // SplashScreenã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚«ã‚¹ã‚¿ãƒ 
        splashScreen.setOnExitAnimationListener { splashScreenView ->
            // 5ç§’å¾Œã«ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ
            val fadeOut = ObjectAnimator.ofFloat(splashScreenView.view, View.ALPHA, 1f, 0f)
            fadeOut.duration = 5000L
            fadeOut.addListener(object : AnimatorListenerAdapter() {
                override fun onAnimationEnd(animation: Animator) {
                    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã«ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢ã‚’é™¤å»
                    splashScreenView.remove()
                }
            })
            fadeOut.start()
        }
        super.onCreate(savedInstanceState)
```

ã“ã‚Œã§ã‚¢ãƒ—ãƒªèµ·å‹•ã™ã‚‹ã¨ğŸ‘‡ã®æ§˜ã«5ç§’å¾Œã«SplashScreenãŒãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã—ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã€‚

![image9.gif](/images/2e21918bc05313/image9.gif =300x)

# Splash Screenè¡¨ç¤ºæ™‚ã«åˆæœŸåŒ–å‡¦ç†ãªã©ã‚’è¡Œã†

è¡¨ç¤ºä¸­ã«ä½•ã‹å‡¦ç†ã‚’è¡Œã†å ´åˆã«ã€Splash Screenã‚’å‡¦ç†ãŒå®Œäº†ã™ã‚‹ã¾ã§è¡¨ç¤ºã•ã›ã‚‹æ–¹æ³•ã¨ã—ã¦ä»¥ä¸‹ã®æ–¹æ³•ãŒã‚ã‚‹æ§˜ã§ã™ã€‚

1. SplashScreen API ã‚’ä½¿ã†
2. OnPreDrawListener ã‚’åˆ©ç”¨ã—ã¦åˆå›æç”»ã‚’é…å»¶ã•ã›ã‚‹

## SplashScreen API ã‚’ä½¿ã†

`SplashScreen` ã® `setKeepOnScreenCondition` ã‚’ä½¿ç”¨ã—ã¦è¡¨ç¤ºæ™‚é–“ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã¾ã™ã€‚

https://developer.android.com/reference/kotlin/androidx/core/splashscreen/SplashScreen#setKeepOnScreenCondition(androidx.core.splashscreen.SplashScreen.KeepOnScreenCondition)

`MainActivity` ã‚’ä»¥ä¸‹ã®æ§˜ã«ä¿®æ­£ã—ã¾ã™ã€‚

```kotlin
class MainActivity : ComponentActivity() {
    private var isReady = false
    override fun onCreate(savedInstanceState: Bundle?) {
        // è¿½åŠ 
        val splashScreen = installSplashScreen()
        splashScreen.setKeepOnScreenCondition {
            !isReady
        }
        
        super.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
            // ....
        }
        // è¿½åŠ 
        lifecycleScope.launch {
            delay(10000)  // 10ç§’å¾…ã¤ â€»ã“ã“ã§åˆæœŸåŒ–å‡¦ç†ãªã©ã‚’è¡Œã†
            isReady = true
        }
    }
}
```

ã“ã‚Œã§ã‚¢ãƒ—ãƒªèµ·å‹•ã™ã‚‹ã¨ğŸ‘‡ã®æ§˜ã«10ç§’é–“è¡¨ç¤ºã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚

![image10.gif](/images/2e21918bc05313/image10.gif =300x)

## OnPreDrawListener ã‚’åˆ©ç”¨ã—ã¦åˆå›æç”»ã‚’é…å»¶ã•ã›ã‚‹

`ViewTreeObserver` ã® `OnPreDrawListener` ã‚’ä½¿ç”¨ã—ã¦åˆå›æç”»ã‚’é…ã‚‰ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

https://developer.android.com/reference/android/view/ViewTreeObserver.OnPreDrawListener

`MainActivity` ã‚’ä»¥ä¸‹ã®æ§˜ã«ä¿®æ­£ã—ã¾ã™ã€‚

```kotlin
class MainActivity : ComponentActivity() {
    private var isReady = false
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
          // ....
        }
        // ã“ã“ã‹ã‚‰è¿½åŠ 
        val content: View = findViewById(android.R.id.content)
        content.viewTreeObserver.addOnPreDrawListener(
            object : ViewTreeObserver.OnPreDrawListener {
                override fun onPreDraw(): Boolean {
                    return if (isReady) {
                        // æç”»ã‚’çµ‚äº†ã•ã›ã‚‹
                        content.viewTreeObserver.removeOnPreDrawListener(this)
                        true
                    } else {
                        // isReady = falseã®é–“ã¯æç”»ã•ã›ã‚‹
                        false
                    }
                }
            }
        )
        lifecycleScope.launch {
            delay(10000)  // 10ç§’å¾…ã¤ â€»ã“ã“ã§åˆæœŸåŒ–å‡¦ç†ãªã©ã‚’è¡Œã†
            isReady = true
        }
    }
}
```

ã“ã‚Œã§ã‚¢ãƒ—ãƒªèµ·å‹•ã™ã‚‹ã¨ã“ã¡ã‚‰ã‚‚åŒæ§˜ã«10ç§’é–“è¡¨ç¤ºã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚

![image11.gif](/images/2e21918bc05313/image11.gif =300x)

# å‚è€ƒURL

https://developersancho.medium.com/jetpack-compose-splash-screen-api-36ca40c6196b

https://qiita.com/irgaly/items/7ebba96f16462158579d

https://zenn.dev/portinc/articles/port_android12_splash_screen