---
title: "ã€React Nativeã€‘Expo Routerã‚’å°å…¥ã™ã‚‹"
emoji: "âš¡ï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  - "reactnative"
  - "expo"
  - "exporouter"
  - "typescript"
published: true
---
# æ¦‚è¦

ä»Šå›ã¯ã€ReactÂ Native ã« ExpoÂ Router ã‚’å°å…¥ã—ã¦åŸºæœ¬çš„ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’æ§‹ç¯‰ã—ã¦å‹•ä½œç¢ºèªã—ã¾ã—ãŸã€‚ã‚ã‚ã›ã¦ BottomTab ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã¨ä½µç”¨ã™ã‚‹æ–¹æ³•ã‚‚æ¤œè¨¼ã—ã¦ã¿ã¾ã—ãŸã€‚

# Expo Router ã¨ã¯?

> React Nativeã¨Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

Next.js ã¿ãŸã„ãªä½¿ã„æ–¹ãŒã§ãã‚‹æ§˜ã§ã™ ğŸ‘€

https://docs.expo.dev/versions/latest/sdk/router/

# å‹•ä½œç’°å¢ƒæ§‹ç¯‰

æ—©é€Ÿè©¦ã—ã¦ã„ãç’°å¢ƒã‚’ä½œæˆã—ã¾ã™ã€‚ `react-native-example` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã— `blank-typescript` ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”¨ã„ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

```bash
$ mkdir react-native-example
$ cd react-native-example
$ npx create-expo-app@latest --template blank-typescript
```

ã“ã®æ™‚ç‚¹ã§ã® `package.json` ã® `dependencies` ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã—ãŸã€‚

```json
  "dependencies": {
    "expo": "~52.0.41",
    "expo-status-bar": "~2.0.1",
    "react": "18.3.1",
    "react-native": "0.76.7"
  },
  "devDependencies": {
    "@babel/core": "^7.25.2",
    "@types/react": "~18.3.12",
    "typescript": "^5.3.3"
  },
```

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

https://docs.expo.dev/router/installation/

ğŸ‘†ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã® **`Manual installation`** å‰æã§é€²ã‚ã¦ã„ãã¾ã™ã€‚

```bash
npx expo install expo-router react-native-safe-area-context react-native-screens expo-linking expo-constants
```

è¤‡æ•°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä¸€æ°—ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¿ãŸã„ãªã®ã§ã€1å€‹ãšã¤èª¿ã¹ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

- expo-router
  - ä»Šå›è©¦ã™ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
- [react-native-safe-area-context](https://docs.expo.dev/versions/latest/sdk/safe-area-context/)
  - ãƒ‡ãƒã‚¤ã‚¹ã®Safe Area Inset ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®æŸ”è»ŸãªAPIã‚’æä¾›
  - ãƒãƒƒãƒã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã€ãƒ›ãƒ¼ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã€ãã®ä»–ã®ãƒ‡ãƒã‚¤ã‚¹ã‚„ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹è¦ç´ ã®å‘¨å›²ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’é©åˆ‡ã«é…ç½®ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
  - SafeAreaView ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚æä¾›ã—ã¦ãŠã‚Šã€View ã®ä»£ã‚ã‚Šã«ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚»ãƒ¼ãƒ•ã‚¨ãƒªã‚¢ã‚’è€ƒæ…®ã—ãŸãƒ“ãƒ¥ãƒ¼ã‚’è‡ªå‹•çš„ã«æŒ¿å…¥ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
- [react-native-screens](https://github.com/software-mansion/react-native-screens)
  - é€šå¸¸ ReactNative ã®ç”»é¢é·ç§»ã¯ JavaScript ä¸Šã§ç®¡ç†ã•ã‚Œã‚‹ãŒã€`react-native-screens` ã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€iOS ã® `UINavigationController` ã‚„ Android ã® `Fragment` ãªã©ã€å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ãƒã‚¤ãƒ†ã‚£ãƒ–ãªç”»é¢ç®¡ç†ã‚’åˆ©ç”¨ã§ãã‚‹
  - ã“ã‚Œã«ã‚ˆã‚Šã€ç”»é¢é·ç§»ãŒã‚ˆã‚Šã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚Šã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚‚æœ€é©åŒ–ã•ã‚Œã‚‹
- [expo-linking](https://docs.expo.dev/versions/latest/sdk/linking/)
  - ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã‚’ç°¡å˜ã«æ‰±ãˆã‚‹æ§˜ã«ã™ã‚‹
- [expo-constants](https://docs.expo.dev/versions/latest/sdk/constants/)
  - ã‚¢ãƒ—ãƒªã«é–¢ã™ã‚‹ã•ã¾ã–ã¾ãªå®šæ•°æƒ…å ±ï¼ˆã‚¢ãƒ—ãƒªåã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ãƒ“ãƒ«ãƒ‰ç•ªå·ã€ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±ãªã©ï¼‰ã‚’å–å¾—ã§ãã‚‹

ğŸ‘†ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚

```json
  "dependencies": {
    ...
    "expo-router": "~4.0.20",
    "react-native-safe-area-context": "4.12.0",
    "react-native-screens": "~4.4.0",
    "expo-constants": "~17.0.8",
    "expo-linking": "~7.0.5"
  },
```

æ¬¡ã« `package.json` ã® `main` ã‚’ä»¥ä¸‹ã«å¤‰æ›´ã—ã¾ã™ã€‚

```json
{
  "main": "expo-router/entry"
}
```

æ¬¡ã« `app.json` ã¾ãŸã¯ `app.config.js` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```json
{
  "expo": {
    "scheme": "your-app-scheme",
    "plugins": ["expo-router"]
  }
}
```

ã“ã‚Œã§æº–å‚™å®Œäº†ã§ã™ã€‚

# ãƒ«ãƒ¼ãƒˆãƒšãƒ¼ã‚¸è¡¨ç¤º

ã¡ã‚ƒã‚“ã¨è¨­å®šã§ãã¦ã„ã‚‹ã‹ã€ãƒ«ãƒ¼ãƒˆãƒšãƒ¼ã‚¸ã ã‘è¨­å®šã—ã¦è¡¨ç¤ºã•ã›ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

ã¾ãšæ—¢å­˜ã® `App.tsx` ã‚’å‰Šé™¤ã—ã€æ–°ãŸã« `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ä¸­ã« `index.tsx` ã‚’ä»¥ä¸‹å†…å®¹ã§ä½œæˆã—ã¾ã™ã€‚

```tsx
import { Text } from 'react-native';

const Page = () => {
  return <Text>Page</Text>;
};

export default Page;
```

ã“ã‚Œã§ `npm run start` ã§ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã— `Page` ãŒè¡¨ç¤ºã•ã‚Œã¨ã‘ã°OKã§ã™ã€‚

# BottomTab ã¨ä½µç”¨ã™ã‚‹

æœ€å¾Œã« Bottom Tabs ã‚’ä½¿ã†å ´åˆã¯ã©ã†ãªã‚‹ã®ã‹è©¦ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

ä»¥ä¸‹å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã«é€²ã‚ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

https://docs.expo.dev/router/advanced/tabs/

ã¾ãšã¯ `app/_layout.tsx` ã‚’ä»¥ä¸‹å†…å®¹ã§ä½œæˆã—ã¾ã™ã€‚

```tsx
import { Stack } from 'expo-router/stack';

const Layout = () => {
  return (
    <Stack>
      <Stack.Screen name="(tabs)" options={{ headerShown: false }} />
    </Stack>
  );
};

export default Layout;
```

[Stack](https://docs.expo.dev/router/advanced/stack/) ã® `Stack.Screen` ã‚’ç”¨ã„ã¦èµ·å‹•ã•ã‚ŒãŸã‚‰å­ãƒ«ãƒ¼ãƒˆ `(tabs)` ã‚’Stackã«è¿½åŠ ã—ã€ `(tabs)` é…ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚Stackã¯Android ã§ã¯ `FragmentActivity`+`Fragment`ã€iOS ã§ã¯ `UINavigationController`+`UIViewController` ã«ç½®ãæ›ã‚ã‚‹æ§˜ã§ã™ã€‚

æ¬¡ã« `(tabs)` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã— `app/(tabs)/_layout.tsx` ã‚’ä»¥ä¸‹å†…å®¹ã§ä½œæˆã—ã¾ã™ã€‚

```tsx
import FontAwesome from '@expo/vector-icons/FontAwesome';
import { Tabs } from 'expo-router';

const TabLayout = () => {
  return (
    <Tabs screenOptions={{ tabBarActiveTintColor: 'blue' }}>
      <Tabs.Screen
        name="index"
        options={{
          title: 'Home',
          tabBarIcon: ({ color }) => (
            <FontAwesome size={28} name="home" color={color} />
          ),
        }}
      />
      <Tabs.Screen
        name="settings"
        options={{
          title: 'Settings',
          tabBarIcon: ({ color }) => (
            <FontAwesome size={28} name="cog" color={color} />
          ),
        }}
      />
    </Tabs>
  );
};

export default TabLayout;
```

æœ€å¾Œã«å„ã‚¿ãƒ–ã®ä¸­èº«ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚ `app/(tabs)/index.tsx` ã¨ `app/(tabs)/settings.tsx` ã‚’ä»¥ä¸‹å†…å®¹ã§ä½œæˆã—ã¾ã™ã€‚

```tsx
import { StyleSheet, Text, View } from 'react-native';

const Tab = () => {
  return (
    <View style={styles.container}>
      {/* index.tsxã®å ´åˆã¯Home, settings.tsxã¯Settingsã«ã™ã‚‹*/}
      <Text>Tab [Settings or Home]</Text>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
});

export default Tab;
```

æ—©é€Ÿå‹•ã‹ã—ã¦ã¿ã‚‹ã¨ğŸ‘‡ã®æ§˜ã«ãªã‚Šã¾ã™ã€‚ã†ã¾ãå‹•ã„ã¦ãã†ã§ã™ âœ¨

![image1.gif](/images/331f6d4ac2ce11/image1.gif =300x)

ã¡ãªã¿ã« `app/_layout.tsx` ã® `options={{ headerShown: false }}` ã‚’ `true` ã«ã™ã‚‹ã¨ ãƒã‚¤ãƒ†ã‚£ãƒ–ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¦ã—ã¾ã„ã¾ã™ ğŸ‘‡ã€‚ä»Šå›ã¯tabãŒç”¨æ„ã—ã¦ã„ã‚‹ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ä½¿ã†ã®ã§éè¡¨ç¤ºã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚

![image2.gif](/images/331f6d4ac2ce11/image2.gif =300x)

# å‚è€ƒURL

https://reffect.co.jp/react/expo-router

https://qiita.com/masarufuruya/items/b63a171c1d8fba73cdac