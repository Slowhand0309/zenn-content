---
title: "ã€Androidã€‘Composeã§æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ãã‚‹ç™»éŒ²ç”»åƒãƒªã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹"
emoji: "ğŸ¨"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  - "android"
  - "compose"
  - "kotlin"
  - "coil"
published: true
---
# æ¦‚è¦

ã©ã®æ§˜ãªã‚‚ã®ã‹ã¯ğŸ‘‡ã“ã¡ã‚‰ã®å‹•ç”»ã‚’è¦‹ã¦é ‚ã‘ã‚Œã°ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã‚„ã™ã„ã¨æ€ã„ã¾ã™ã€‚ã“ã‚Œã‚’Androidå‘ã‘ã«Composeã‚’ä½¿ã£ã¦å®Ÿè£…ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

![image1.gif](/images/767d486c988270/image1.gif)

æ©Ÿèƒ½ã¨ã—ã¦ã¯

- ãƒªã‚¹ãƒˆã‚’æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ãã‚‹
- ãƒªã‚¹ãƒˆã«ç”»åƒã‚’è¿½åŠ ã§ãã‚‹
- ãƒªã‚¹ãƒˆã®ç”»åƒã‚’å‰Šé™¤ã§ãã‚‹

ä¸Šè¨˜ã®æ©Ÿèƒ½ã‚’æŒã¤å‰æã§å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚

## å‹•ä½œç’°å¢ƒ

- Android Studio Ladybug | 2024.2.1 Patch 2
- MBA M3 Sonoma 14.6.1
- kotlin 2.1.0
- compose-bom 2024.12.01

## å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¿½åŠ 

ä»Šå›ã¯ç”»åƒè¡¨ç¤ºã™ã‚‹éƒ¨åˆ†ã« [Coil](https://coil-kt.github.io/coil/) ã® [AsyncImage](https://coil-kt.github.io/coil/compose/#asyncimage) ã‚’ä½¿ã†ã®ã§ãã¡ã‚‰ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚

`gradle/libs.versions.toml` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```toml
[versions]
coil = "2.7.0"

[libraries]
coil-compose = { module = "io.coil-kt:coil-compose", version.ref = "coil" }
```

`build.gradle.kts` ã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```kotlin
dependencies {
  implementation(libs.coil.compose)
}
```

## ã‚·ãƒ³ãƒ—ãƒ«ãªæ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å®Ÿè£…

é©å½“ã«Androidã‚¢ãƒ—ãƒªç”¨ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã— `HorizontalImageList.kt` ã¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚ã¾ãšã¯ã‚·ãƒ³ãƒ—ãƒ«ã«æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¡¨ç¤ºã‚’å®Ÿè£…ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

```kotlin
@Composable
fun HorizontalImageList(images: List<String>) {
    LazyRow {
        items(images.size, key = { it }) {
            val image = images[it]
            AsyncImage(
                model = image,
                contentDescription = null,
                modifier = Modifier
                    .size(150.dp)
                    .background(Color.Gray),

                )
        }
    }
}

@Preview
@Composable
fun HorizontalImageListPreview() {
    // ãªã‚‹ã¹ããƒ©ãƒ³ãƒ€ãƒ ãªç”»åƒã«ãªã‚‹ã‚ˆã†ã«idã‚’é€£ç•ªã«ã—ãªã„æ§˜ã«ã—ã¦ã¾ã™
    val images = List(10) { "https://picsum.photos/id/${it * 10}/150/150" }
    Box(
        Modifier
            .background(Color.White)
            .padding(16.dp)
    ) {
        HorizontalImageList(images)
    }
}
```

Previewã®å®Ÿè¡ŒçµæœãŒğŸ‘‡ã«ãªã‚Šã¾ã™ã€‚(â€» Run Previewã—ã¦ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§å®Ÿè¡Œã—ã¦ã„ã¾ã™)

![image2.gif](/images/767d486c988270/image2.gif)

## æœ€å¾Œã«ç”»åƒè¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ã€Œ+ã€ã‚’ãƒªã‚¹ãƒˆã®æœ€å¾Œã«è¡¨ç¤ºã™ã‚‹

æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®æœ€å¾Œã«ã€ç”»åƒã‚’è¿½åŠ ã§ãã‚‹ã‚ˆã†ãªã€Œ+ã€ãƒœã‚¿ãƒ³ã‚’è¨­ç½®ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

`HorizontalImageList` ã‚’å°‘ã—ä¿®æ­£ã—ã¾ã™ã€‚

```kotlin
@Composable
fun HorizontalImageList(images: List<String>) {
    LazyRow {
        items(images.size + 1, key = { it }) {
            if (images.size > it) {
                val image = images[it]
                AsyncImage(
                    model = image,
                    contentDescription = null,
                    modifier = Modifier
                        .size(150.dp)
                        .background(Color.Gray),

                    )

            } else {
                IconButton(
                    modifier = Modifier
                        .size(150.dp)
                        .background(
                            color = Color.Gray,
                            shape = RoundedCornerShape(8.dp)
                        ),
                    onClick = {}
                ) {
                    Icon(
                        imageVector = Icons.Filled.Add,
                        contentDescription = "Add",
                        tint = Color.White
                    )
                }
            }
        }
    }
}
```

Previewã®å®Ÿè¡ŒçµæœãŒğŸ‘‡ã«ãªã‚Šã¾ã™ã€‚

![image3.gif](/images/767d486c988270/image3.gif)

## å„ç”»åƒã«å‰Šé™¤ç”¨ã®ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹

ã•ã‚‰ã«`HorizontalImageList` ã‚’ä¿®æ­£ã—ã¦ã€å„ç”»åƒã®ä¸Šã«å‰Šé™¤ç”¨ã®ãƒœã‚¿ãƒ³ã‚’è¨­ç½®ã—ã¾ã™ã€‚

```kotlin
@Composable
fun HorizontalImageList(images: List<String>) {
    LazyRow {
        items(images.size + 1, key = { it }) {
            if (images.size > it) {
                val image = images[it]
                Box {
                    AsyncImage(
                        model = image,
                        contentDescription = null,
                        modifier = Modifier
                            .size(150.dp)
                            .background(Color.Gray),

                        )
                    // ã“ã“ã‹ã‚‰IconButtonè¿½åŠ 
                    IconButton(
                        modifier = Modifier
                            .align(Alignment.TopEnd)
                            .padding(2.dp)
                            .clip(CircleShape)
                            .size(25.dp, 25.dp)
                            .background(Color.White),
                        onClick = {}
                    ) {
                        Icon(
                            imageVector = Icons.Filled.Close,
                            contentDescription = "Delete",
                            tint = Color.Unspecified
                        )
                    }
                }
            } else {
                IconButton(
                    modifier = Modifier
                        .size(150.dp)
                        .background(
                            color = Color.Gray,
                            shape = RoundedCornerShape(8.dp)
                        ),
                    onClick = {}
                ) {
                    Icon(
                        imageVector = Icons.Filled.Add,
                        contentDescription = "Add",
                        tint = Color.White
                    )
                }
            }
        }
    }
}
```

Previewã®å®Ÿè¡ŒçµæœãŒğŸ‘‡ã«ãªã‚Šã¾ã™ã€‚

![image4.gif](/images/767d486c988270/image4.gif)

## å®Œæˆç‰ˆ

æœ€å¾Œã«å„ç”»åƒé–“ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚ŒãŸã‚Šã€ç”»åƒã‚’è§’ä¸¸ã«ã—ãŸå®Œæˆå½¢ãŒä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚

```kotlin
@Composable
fun HorizontalImageList(images: List<String>) {
    LazyRow {
        items(images.size + 1, key = { it }) {
            if (images.size > it) {
                val image = images[it]
                Box(modifier = Modifier.padding(end = 6.dp)) { // ã‚¹ãƒšãƒ¼ã‚¹è¿½åŠ 
                    // å„ç”»åƒã‚’è§’ä¸¸ã«
                    AsyncImage(
                        model = image,
                        contentDescription = null,
                        contentScale = ContentScale.Crop,
                        modifier = Modifier
                            .size(150.dp)
                            .clip(RoundedCornerShape(8.dp))
                            .background(Color.Gray),

                        )
                    IconButton(
                        modifier = Modifier
                            .align(Alignment.TopEnd)
                            .padding(2.dp)
                            .clip(CircleShape)
                            .size(25.dp, 25.dp)
                            .background(Color.White),
                        onClick = {}
                    ) {
                        Icon(
                            imageVector = Icons.Filled.Close,
                            contentDescription = "Delete",
                            tint = Color.Unspecified
                        )
                    }
                }
            } else {
                IconButton(
                    modifier = Modifier
                        .size(150.dp)
                        .background(
                            color = Color.Gray,
                            shape = RoundedCornerShape(8.dp)
                        ),
                    onClick = {}
                ) {
                    Icon(
                        imageVector = Icons.Filled.Add,
                        contentDescription = "Add",
                        tint = Color.White
                    )
                }
            }
        }
    }
}
```

Previewã®å®Ÿè¡ŒçµæœãŒğŸ‘‡ã«ãªã‚Šã¾ã™ã€‚(å†’é ­ã®å‹•ç”»ã¨åŒã˜ã§ã™)

![image1.gif](/images/767d486c988270/image1.gif)

# å‚è€ƒURL

https://qiita.com/yasukotelin/items/0cde47d85d58d46017e9