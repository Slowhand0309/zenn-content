---
title: "ã€Flutterã€‘CustomPainterã§ä½œã‚‹ã‚ªãƒªã‚¸ãƒŠãƒ«Breadcrumb"
emoji: "ğŸ¥"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  - "flutter"
  - "dart"
  - "custompainter"
published: true
---
# ã¯ã˜ã‚ã«

ã“ã®è¨˜äº‹ã¯Flutterã§ [CustomPainter](https://api.flutter.dev/flutter/rendering/CustomPainter-class.html) ã‚’ä½¿ã£ãŸ `breadcrumb` ã‚’å®Ÿè£…ã—ãŸæ™‚ã®ãƒ¡ãƒ¢ã«ãªã‚Šã¾ã™ã€‚
CustomPainterã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€é€šå¸¸ã®Widgetã§ã¯é›£ã—ã„ã‚«ã‚¹ã‚¿ãƒ æç”»ã‚’è¡Œãˆã¾ã™ã€‚

## ã‚´ãƒ¼ãƒ«

ä»¥ä¸‹ã®æ§˜ãª `breadcrumb` ã‚’æç”»ã™ã‚‹äº‹ã‚’ã‚´ãƒ¼ãƒ«ã¨ã—ã¦é€²ã‚ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

![image1.png](/images/63387104957199/image1.png =600x)

Widgetã‚’é§†ä½¿ã—ã¦ã‚„ã£ã¦ã‚‚ã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ä»Šå›ã¯ã‚ãã¾ã§ [CustomPainter](https://api.flutter.dev/flutter/rendering/CustomPainter-class.html) ã‚’ä½¿ç”¨ã—ã¦æç”»ã•ã›ã‚‹å®Ÿè£…ã§é€²ã‚ã¦ã„ãã¾ã™ã€‚

# ç’°å¢ƒæ§‹ç¯‰ã‚„æº–å‚™

å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ç’°å¢ƒ

```text
MBA: M3 24GB macOS 14.6.1
Flutter: 3.24.3
VSCode: 1.94.0
```

# å®Ÿè£…

## 1. ã¾ãšã¯å˜ç´”ãªå††ã‚’æç”»ã™ã‚‹

### 1-1. åœŸå°ã¨ã—ã¦  `StatelessWidget` ã‚¯ãƒ©ã‚¹ã‚’ç¶™æ‰¿ã—ãŸ`CustomPainterSample` ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆ

ã“ã®æ™‚ç‚¹ã§ã¯CustomPaintã«painterã‚’æŒ‡å®šã›ãšã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æç”»ã‚’ç¢ºèªã—ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';

class CustomPainterSample extends StatelessWidget {
  const CustomPainterSample({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Custom Painter Sample')),
      body: SizedBox(
        width: double.infinity,
        height: 120,
        child: Container(
          color: Colors.amber,
          padding: const EdgeInsets.all(5),
          child: CustomPaint(
            child: Container(
              color: Colors.red,
            ),
          ),
        ),
      ),
    );
  }
}
```

CustomPaintã® `Container` ãŒã©ã‚“ãªé¢¨ã«æç”»ã•ã‚Œã‚‹ã®ã‹åˆ†ã‹ã‚Šã‚„ã™ãã™ã‚‹ç‚ºã«è‰²ã‚’æŒ‡å®šã—ã¾ã—ãŸã€‚

![image2.png](/images/63387104957199/image2.png =600x)

### 1-2. `CustomPainter` ã‚’ç¶™æ‰¿ã—ãŸPainterã‚¯ãƒ©ã‚¹ã‚’ä½œæˆ

```dart
import 'package:flutter/material.dart';

class CustomPainterSample extends StatelessWidget {
  const CustomPainterSample({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Custom Painter Sample')),
      body: SizedBox(
        width: double.infinity,
        height: 120,
        child: Container(
          color: Colors.amber,
          padding: const EdgeInsets.all(5),
          child: CustomPaint(
            painter: CirclePainter(), // è¿½åŠ !
            child: Container(
              color: Colors.red.withOpacity(0.5), // åˆ†ã‹ã‚Šã‚„ã™ãåŠé€æ˜ã«ã—ã¾ã—ãŸ
            ),
          ),
        ),
      ),
    );
  }
}

class CirclePainter extends CustomPainter {
  @override
  void paint(Canvas canvas, Size size) {
    final Paint paint = Paint();
    // åŠå¾„10ã®å††ã‚’æç”»
    paint.color = Colors.green;
    canvas.drawCircle(Offset(size.width / 2, size.height / 2), 10, paint);
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) => false;
}
```

å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®æ§˜ã«ãªã‚Šã¾ã—ãŸã€‚

![image3.png](/images/63387104957199/image3.png =600x)

`CustomPaint` ã® `child` ã«æŒ‡å®šã—ãŸWidgetãŒä¸€ç•ªæ‰‹å‰ã«æ¥ã‚‹ã¿ãŸã„ã§ã™ã€‚

ã¾ãŸ `pain` ãƒ¡ã‚½ãƒƒãƒ‰ã§æ¸¡ã£ã¦ãã‚‹ `size` ã¯CustomPaint(â†‘ã ã¨è–„ã„èµ¤è‰²éƒ¨åˆ†)ã®ã‚µã‚¤ã‚ºãŒæ¸¡ã£ã¦ãã¾ã™ã€‚

## 2. å‡ä¸€ã«å††ã‚’ä¸¦ã¹ã‚‹

æœ€å¾Œã« `breadcrumb` ã£ã½ããªã‚‹ã‚ˆã†ã«ç›´ç·šã®ä¸Šã«ã€ä»Šå›ã¯å›ºå®šæ•°ã®å††ã‚’ä¸¦ã¹ã‚‹æ§˜ãªå‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';

class CustomPainterSample extends StatelessWidget {
  const CustomPainterSample({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Custom Painter Sample')),
      body: SizedBox(
        width: double.infinity,
        height: 120,
        child: Container(
          color: Colors.amber,
          padding: const EdgeInsets.all(5),
          child: CustomPaint(
            painter: CirclePainter(), // è¿½åŠ !
            child: Container(
              color: Colors.red.withOpacity(0.5), // åˆ†ã‹ã‚Šã‚„ã™ãåŠé€æ˜ã«ã—ã¾ã—ãŸ
            ),
          ),
        ),
      ),
    );
  }
}

class CirclePainter extends CustomPainter {
  final double radius = 10;
  final double strokeWidth = 3;

  @override
  void paint(Canvas canvas, Size size) {
    final Paint paint = Paint();
    paint.color = Colors.blue;

    final double w = (size.width - (radius * 2)) / 6.0;
    paint.strokeWidth = strokeWidth;
    canvas.drawLine(
        Offset(0, size.height / 2), Offset(size.width, size.height / 2), paint);
    for (int i = 0; i < 7; i++) {
      drawOutlineCircle(canvas, Offset(w * i + radius, size.height / 2));
    }
  }

  // å††(å¡—ã‚Šã¤ã¶ã—)
  void drawCircle(Canvas canvas, Offset c) {
    final Paint paint = Paint();
    paint.color = Colors.blue;
    canvas.drawCircle(c, radius, paint);
  }

  // å††(å¤–ç·š)
  void drawOutlineCircle(Canvas canvas, Offset c) {
    final Paint line = Paint()
      ..color = Colors.blue
      ..strokeCap = StrokeCap.round
      ..style = PaintingStyle.stroke
      ..strokeWidth = strokeWidth;
    canvas.drawCircle(c, radius, line);

    final Paint paint = Paint();
    paint.color = Colors.white;
    canvas.drawCircle(c, radius - (strokeWidth / 2), paint);
  }

  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) => false;
}
```

å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®æ§˜ã«ãªã‚Šã¾ã—ãŸã€‚
ä¸­å¤®ã®æ°´å¹³ç·šã«æ²¿ã£ã¦7ã¤ã®å††ãŒå‡ç­‰ã«ä¸¦ã‚“ã§ã„ã‚‹ã®ãŒç¢ºèªã§ãã¾ã™ã€‚

![image4.png](/images/63387104957199/image4.png =600x)

CustomPaintã® `Container` ã‚’å¤–ã™ã¨ğŸ‘‡ã®æ§˜ã«ãªã‚Šã¾ã™ã€‚

![image5.png](/images/63387104957199/image5.png =600x)

# ã¾ã¨ã‚

ã‚ã¾ã‚Šç„¡ã„ã¨ã¯æ€ã„ã¾ã™ãŒã€CustomPainterã‚’ä½¿ã£ã¦ `breadcrumb` ã£ã½ã„ã‚‚ã®ã‚’ä½œã‚‹æ™‚ã®å‚è€ƒã«å°‘ã—ã§ã‚‚ãªã‚Œã°ã¨æ€ã„ã¾ã™ã€‚
