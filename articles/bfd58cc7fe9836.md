---
title: "prisma-markdownã‚’è©¦ã™"
emoji: "âš¡"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  - "prisma"
  - "markdown"
  - "erd"
  - "mermaid"
published: true
---
# æ¦‚è¦

Prismaã®Schemeã‚’Mermaid ERD diagramsã§ç”Ÿæˆã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ« `prisma-markdown` ã‚’è¦‹ã¤ã‘ãŸã®ã§è©¦ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

https://github.com/samchon/prisma-markdown

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

- npm

```bash
npm i -D prisma-markdown
```

- yarn

```bash
yarn add -D prisma-markdown
```

# æ—©é€ŸERDã‚’ç”Ÿæˆã—ã¦ã¿ã‚‹

ä»Šå›ã¯ä»¥ä¸‹ã® schema ã‚’æƒ³å®šã—ã¦ã€ç”Ÿæˆã—ã¦ã¿ã¾ã™ã€‚

```tsx
model User {
  id        Int       @id @default(autoincrement())
  createdAt DateTime  @default(now())
  email     String    @unique
  name      String?
  comments  Comment[]
  posts     Post[]
}

model Post {
  id        Int       @id @default(autoincrement())
  createdAt DateTime  @default(now())
  title     String
  content   String?
  published Boolean   @default(false)
  authorId  Int
  author    User      @relation(fields: [authorId], references: [id])
  comments  Comment[]
  tags      Tag[]     @relation("TagToPost")
}

model Comment {
  id          Int      @id @default(autoincrement())
  createdAt   DateTime @default(now())
  comment     String
  writtenById Int
  postId      Int
  writtenBy   User     @relation(fields: [writtenById], references: [id])
  post        Post     @relation(fields: [postId], references: [id], onUpdate: NoAction)
}

model Tag {
  id    Int    @id @default(autoincrement())
  tag   String @unique
  posts Post[] @relation("TagToPost")
}
```

æ¬¡ã« `schema.prisma` ã«ğŸ‘‡ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```tsx
generator markdown {
  provider = "prisma-markdown"
  output   = "./ERD.md"
  title    = "TITLE"
}
```

æ¬¡ã«ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã§ `ERD.md` ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

```bash
npx prisma generate
```

å®Ÿè¡Œã™ã‚‹ã¨ğŸ‘‡å†…å®¹ã§ `prisma/ERD.md` ãŒä½œæˆã•ã‚Œã¾ã—ãŸ ğŸ‰

```mermaid
erDiagram
"User" {
  Int id PK
  DateTime createdAt
  String email UK
  String name "nullable"
}
"Post" {
  Int id PK
  DateTime createdAt
  String title
  String content "nullable"
  Boolean published
  Int authorId FK
}
"Comment" {
  Int id PK
  DateTime createdAt
  String comment
  Int writtenById FK
  Int postId FK
}
"Tag" {
  Int id PK
  String tag UK
}
"_PostToTag" {
  String A FK
  String B FK
}
"Post" }o--|| "User" : author
"Comment" }o--|| "User" : writtenBy
"Comment" }o--|| "Post" : post
"_PostToTag" }o--|| "Post" : Post
"_PostToTag" }o--|| "Tag" : Tag
```

:::details markdownå…¨ä½“

```markdown
# TITLE
> Generated by [`prisma-markdown`](https://github.com/samchon/prisma-markdown)

- [default](#default)

## default

erDiagram
"User" {
  Int id PK
  DateTime createdAt
  String email UK
  String name "nullable"
}
"Post" {
  Int id PK
  DateTime createdAt
  String title
  String content "nullable"
  Boolean published
  Int authorId FK
}
"Comment" {
  Int id PK
  DateTime createdAt
  String comment
  Int writtenById FK
  Int postId FK
}
"Tag" {
  Int id PK
  String tag UK
}
"_PostToTag" {
  String A FK
  String B FK
}
"Post" }o--|| "User" : author
"Comment" }o--|| "User" : writtenBy
"Comment" }o--|| "Post" : post
"_PostToTag" }o--|| "Post" : Post
"_PostToTag" }o--|| "Tag" : Tag


### `User`

**Properties**
  - `id`: 
  - `createdAt`: 
  - `email`: 
  - `name`: 

### `Post`

**Properties**
  - `id`: 
  - `createdAt`: 
  - `title`: 
  - `content`: 
  - `published`: 
  - `authorId`: 

### `Comment`

**Properties**
  - `id`: 
  - `createdAt`: 
  - `comment`: 
  - `writtenById`: 
  - `postId`: 

### `Tag`

**Properties**
  - `id`: 
  - `tag`: 

### `_PostToTag`
Pair relationship table between [Post](#Post) and [Tag](#Tag)

**Properties**
  - `A`: 
  - `B`: 
```

:::

â€» VSCodeã§ `ERD.md` ã‚’è¡¨ç¤ºã•ã›ã‚‹ã«ã¯ğŸ‘‡ãªã©ã®æ‹¡å¼µæ©Ÿèƒ½ãŒå¿…è¦ã§ã™

https://marketplace.visualstudio.com/items?itemName=bierner.markdown-mermaid

# ã‚³ãƒ¡ãƒ³ãƒˆ

## namespace

`/// @namespace <name>` ã¨ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹ã¨ãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ã‚’namespaceæ¯ã«åˆ†å‰²ã—ã¦ãã‚Œã¾ã™ã€‚

è©¦ã—ã¦ã«å…ˆã»ã©ã® `schema.prisma` ã« `/// @namespace <name>`  ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã™ã€‚

```tsx
/// @namespace User
model User {
  ...
}

/// @namespace Post
model Post {
  ...
}

/// @namespace Post
model Comment {
  ...
}

/// @namespace Post
model Tag {
  ...
}
```

ã™ã‚‹ã¨ç”Ÿæˆã•ã‚Œã‚‹Markdownã¯ğŸ‘‡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![image1.png](/images/bfd58cc7fe9836/image1.png =300x)

![image2.png](/images/bfd58cc7fe9836/image2.png =300x)

`User` ã¨ `Post` ã§åˆ†å‰²ã•ã‚Œã¦ã„ã¾ã™ã€‚

:::details markdownå…¨ä½“

```markdown
# TITLE
> Generated by [`prisma-markdown`](https://github.com/samchon/prisma-markdown)

- [User](#user)
- [Post](#post)

## User

erDiagram
"User" {
  Int id PK
  DateTime createdAt
  String email UK
  String name "nullable"
}


### `User`

**Properties**
  - `id`: 
  - `createdAt`: 
  - `email`: 
  - `name`: 

## Post

erDiagram
"Post" {
  Int id PK
  DateTime createdAt
  String title
  String content "nullable"
  Boolean published
  Int authorId FK
}
"Comment" {
  Int id PK
  DateTime createdAt
  String comment
  Int writtenById FK
  Int postId FK
}
"Tag" {
  Int id PK
  String tag UK
}
"_PostToTag" {
  String A FK
  String B FK
}
"Comment" }o--|| "Post" : post
"_PostToTag" }o--|| "Post" : Post
"_PostToTag" }o--|| "Tag" : Tag


### `Post`

**Properties**
  - `id`: 
  - `createdAt`: 
  - `title`: 
  - `content`: 
  - `published`: 
  - `authorId`: 

### `Comment`

**Properties**
  - `id`: 
  - `createdAt`: 
  - `comment`: 
  - `writtenById`: 
  - `postId`: 

### `Tag`

**Properties**
  - `id`: 
  - `tag`: 

### `_PostToTag`
Pair relationship table between [Post](#Post) and [Tag](#Tag)

**Properties**
  - `A`: 
  - `B`: 
```

:::

## erd / describe

`/// @erd <name>`  ã¨æ›¸ãã¨ERå›³ã®ã¿è¡¨ç¤ºã•ã‚Œã€ `/// @describe <name>`  ã¨æ›¸ãã¨è©³ç´°éƒ¨åˆ†ã«ã—ã‹è¡¨ç¤ºã•ã‚Œãªããªã‚Šã¾ã™ã€‚

ã“ã‚Œã‚‚å…ˆã»ã©ã® `schema.prisma` ã§è©¦ã—ã¦ã¿ã¾ã™ã€‚

```tsx
/// @namespace User
model User {
  ...
}

/// @namespace Post
model Post {
  ...
}

/// @erd Post
model Comment {
  ...
}

/// @describe Post
model Tag {
  ...
}

```

ğŸ‘†ã¨ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹äº‹ã§ `model Comment` ã¯ERå›³ã®ã¿ã€ `model Tag` ã¯è©³ç´°ã®ã¿ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä»¥ä¸‹ç”Ÿæˆã•ã‚ŒãŸERDã«ãªã‚Šã¾ã™ã€‚

![image3.png](/images/bfd58cc7fe9836/image3.png =300x)

![image4.png](/images/bfd58cc7fe9836/image4.png =300x)

:::details markdownå…¨ä½“

```markdown
# TITLE
> Generated by [`prisma-markdown`](https://github.com/samchon/prisma-markdown)

- [User](#user)
- [Post](#post)

## User

erDiagram
"User" {
  Int id PK
  DateTime createdAt
  String email UK
  String name "nullable"
}

### `User`

**Properties**
  - `id`: 
  - `createdAt`: 
  - `email`: 
  - `name`: 

## Post

erDiagram
"Post" {
  Int id PK
  DateTime createdAt
  String title
  String content "nullable"
  Boolean published
  Int authorId FK
}
"_PostToTag" {
  String A FK
  String B FK
}
"Comment" {
  Int id PK
  DateTime createdAt
  String comment
  Int writtenById FK
  Int postId FK
}
"_PostToTag" }o--|| "Post" : Post
"Comment" }o--|| "Post" : post

### `Post`

**Properties**
  - `id`: 
  - `createdAt`: 
  - `title`: 
  - `content`: 
  - `published`: 
  - `authorId`: 

### `_PostToTag`
Pair relationship table between [Post](#Post) and [Tag](#Tag)

**Properties**
  - `A`: 
  - `B`: 

### `Tag`

**Properties**
  - `id`: 
  - `tag`: 
```

:::
