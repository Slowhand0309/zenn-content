---
title: "ã€Flutterã€‘flutter doctor å¯¾å¿œ"
emoji: "ğŸ’Š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  - "flutter"
  - "android"
  - "ios"
  - "ruby"
published: true
---
# æ¦‚è¦

æœ€è¿‘M3ãƒãƒƒãƒ—ã®MacBook Airã‚’è³¼å…¥ã—Flutterç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã„ã‚‹éš›ã« `flutter doctor` ã§è‰²ã€…å¯¾å¿œãŒå¿…è¦ãã†ã ã£ãŸã®ã§ã€ãã®æ™‚ã®ãƒ¡ãƒ¢ã«ãªã‚Šã¾ã™ã€‚

# ç¾åœ¨ã®çŠ¶æ³

```bash
[!] Android toolchain - develop for Android devices (Android SDK version XXXXX)
   âœ— cmdline-tools component is missing
     Run `path/to/sdkmanager --install "cmdline-tools;latest"`
     See https://developer.android.com/studio/command-line for more details.
   âœ— Android license status unknown.
     Run `flutter doctor --android-licenses` to accept the SDK licenses.
     See https://flutter.dev/docs/get-started/install/macos#android-setup for
     more details.
[âœ—] Xcode - develop for iOS and macOS
   âœ— Xcode installation is incomplete; a full installation is necessary for iOS
     development.
     Download at: https://developer.apple.com/xcode/download/
     Or install Xcode via the App Store.
     Once installed, run:
       sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer
       sudo xcodebuild -runFirstLaunch
   âœ— CocoaPods not installed.
       CocoaPods is used to retrieve the iOS and macOS platform side's plugin
       code that responds to your plugin usage on the Dart side.
       Without CocoaPods, plugins will not work on iOS or macOS.
       For more info, see https://flutter.dev/platform-plugins
     To install see
     https://guides.cocoapods.org/using/getting-started.html#installation for
     instructions.
```

ä¸Šã‹ã‚‰é †ã«å¯¾å¿œã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

## Android

ã¾ãš `sdkmanager` ã§ã™ãŒã€è¨­å®šã•ã‚Œã¦ã„ã‚‹PathãŒ `$ANDROID_HOME/tools/bin` ã®ã‚‚ã®ã ã¨ã†ã¾ãå‹•ä½œã—ãªã„å ´åˆãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚

[React Native ç’°å¢ƒæ§‹ç¯‰æ™‚ã« sdkmanager ã« NoClassDefFoundError ã£ã¦è¨€ã‚ã‚ŒãŸã¨ã„ã†è©± - Qiita](https://qiita.com/jintz/items/a5fb0c16aa9cab703b1e)

â†‘ã“ã¡ã‚‰ã«ã‚ã‚‹é€šã‚Šã€ `$ANDROID_HOME/cmdline-tools/latest/bin` ã®ã‚‚ã®ãŒæ­£ã—ã„ã¨ã®äº‹ã€‚

ç¢ºã‹ã« `cat $ANDROID_HOME/tools/bin/sdkmanager` ã‚’è¦‹ã‚‹ã¨ **`sdkmanager start up script for UN*X`** ã¨ãªã£ã¦ã„ã¾ã—ãŸã€‚

### cmdline-toolsã®è¨­å®š

`$ANDROID_HOME/cmdline-tools/latest/bin` ã«æ—¢ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ã—ã¦é ‚ã„ã¦ã€ã¾ã  `cmdline-tools` è‡ªä½“å­˜åœ¨ã—ãªã„å ´åˆã¯

AndroidStudioã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¯èƒ½ã§ã™ã€‚

ã€ŒSettingsâ€¦ã€>ã€ŒLanguages & Frameworksã€>ã€ŒAndroid SDKã€>ã€ŒSDK Toolsã€ã‹ã‚‰ã€ŒAndroid SDK Command-line Tools (latest)ã€ã«ãƒã‚§ãƒƒã‚¯å…¥ã‚Œã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã¾ã™ã€‚

![image1.png](/images/e64759c5c1c64a/image1.png)

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œ  `$ANDROID_HOME/cmdline-tools/latest/bin` ã«PATHã‚’è¨­å®šã—ã¾ã™ã€‚

ã“ã‚Œã§ `cmdline-tools component is missing` ãŒè§£æ¶ˆã•ã‚Œã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

### Android license

ã“ã¡ã‚‰ã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã‚ã‚‹é€šã‚Š `flutter doctor --android-licenses` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ç¢ºèªãŒã§ãã‚‹ã®ã§ã€ãã¡ã‚‰ã§å¯¾å¿œå¯èƒ½ã§ã™ã€‚

## iOS

æ¬¡ã«iOSå´ã®è¨­å®šã‚’å¯¾å¿œã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

### Xcode installation is incomplete

ã¾ãš `Xcode installation is incomplete; a full installation is necessary for iOS development.` ã®éƒ¨åˆ†ã§ã™ãŒã€Xcodeã‚’ã¾ã ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„å ´åˆã¯ã€App Storeã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’å®Ÿæ–½ã—ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã‚‚ã‚ã‚‹ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer
sudo xcodebuild -runFirstLaunch
```

- xcode-select
    - ã“ã¡ã‚‰ã¯Xcodeã‚„é–¢é€£ã™ã‚‹é–‹ç™ºãƒ„ãƒ¼ãƒ«ã®ãƒ‘ã‚¹ã‚’ç®¡ç†ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã«ãªã£ã¦ãŠã‚Šã€ä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§ `â€”switch` ã§æŒ‡å®šã—ã¦ã„ã‚‹ `/Applications/Xcode.app/Contents/Developer` ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ‘ã‚¹ã«è¨­å®šã—ã¦ã¾ã™
    - `xcode-select --print-path` ã§è¨­å®šã•ã‚Œã¦ã„ã‚‹ãƒ‘ã‚¹ã‚’ç¢ºèªã§ãã¾ã™
- xcodebuild
    - Xcodeãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŠã‚ˆã³ workspace ã®ãƒ“ãƒ«ãƒ‰ã€è§£æã€ãƒ†ã‚¹ãƒˆç­‰ã®æ“ä½œã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ä¸Šã‹ã‚‰å®Ÿè¡Œã§ãã‚‹ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã«ãªã‚Šã¾ã™
    - `-runFirstLaunch` ã‚’å®Ÿè¡Œã™ã‚‹äº‹ã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«è¨±è«¾ã—ã€å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

### CocoaPods not installed

æ¬¡ã«Flutterã§ä½¿ç”¨ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç®¡ç†ãƒ„ãƒ¼ãƒ«ã®CocoaPodsã«é–¢ã—ã¦ã§ã™ã€‚

Homebrewä½¿ã†æ–¹æ³•ã‚‚ã‚ã‚‹ã¿ãŸã„ã§ã™ãŒã€ä»Šå›ã¯ `rbenv` ã§ç®¡ç†ã—ã¦ã„ã‚‹rubyã®gemã¨ã—ã¦installã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

`rbenv` ã‚’ã¾ã ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„å ´åˆã¯ä»¥ä¸‹ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
brew install rbenv ruby-build
```

æ¬¡ã«ä»¥ä¸‹ã‚’å®Ÿæ–½ã—ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚

```bash
rbenv init
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€æ—©é€ŸRubyã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
rbenv install -l # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ãªRubyãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèª
rbenv install 3.2.2 # ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (ä¾‹ 3.2.2
rbenv global 3.2.2 # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã§ä½¿ç”¨ã™ã‚‹Rubyã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨­å®š
```

ã¡ã‚ƒã‚“ã¨RubyãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããŸã‹ `rbenv versions` ã§ç¢ºèªã—ã¾ã™ã€‚

```bash
$ rbenv versions  
  system
* 3.2.2 (set by /Users/xxxxx/.rbenv/version)
```

ã“ã®çŠ¶æ…‹ã§æœ¬é¡Œã®CocoaPodsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
gem install cocoapods
```

ã“ã‚Œã§CocoaPodsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œ `flutter doctor` ã®ã‚¨ãƒ©ãƒ¼ã‚‚è§£æ¶ˆã•ã‚Œã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

### ã€ãã®ä»–ã€‘iPhone SimulatorãŒèµ·å‹•ã§ããªã„

ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹

```
An error was encountered processing the command (domain=FBSOpenApplicationServiceErrorDomain, code=1):
```

[https://github.com/expo/expo-cli/issues/3197](https://github.com/expo/expo-cli/issues/3197)

â†‘ã®issueã«ã‚ã‚‹é€šã‚Š `softwareupdate --install-rosetta --agree-to-license` ã‚’å®Ÿæ–½ã—ã¦ã‚„ã‚‹ã€‚Flutterã®SDKã®ä¸€éƒ¨ã«ã¯ **`Rosetta`** ãŒå¿…è¦ã‚‰ã—ã„ã€‚

# å‚è€ƒURL
- [[Flutter/Mac]Appleã‚·ãƒªã‚³ãƒ³ï¼ˆM1ãƒ»M2ï¼‰ã‚’ãŠä½¿ã„ã®å ´åˆã¯Rosettaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã§ã™ã€‚ â€“ ã¿ã‚“ãƒ—ãƒ­å¼ â€“ åˆå¿ƒè€…å°‚é–€Flutterã§ã‚¹ãƒãƒ›ã‚¢ãƒ—ãƒªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¬›åº§](https://minpro.net/rosetta-needed-for-apple-silicon)

- [CIç’°å¢ƒã§android-sdkã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«åŒæ„ã™ã‚‹ - Qiita](https://qiita.com/akym03/items/7646732b220412b085b7)

- [Flutterã§CocoaPods not installed.ã¨è¨€ã‚ã‚ŒãŸã‚‰ - Qiita](https://qiita.com/yoshinyan/items/2c9a59e5a3bd80b9bdbd)

- [ã€Mac M1ã€‘ã€Œflutter doctorã€å®Ÿè¡Œæ™‚ã®ã€ŒXcode installation is incomplete~ã€ã®è§£æ±ºæ³•](https://zenn.dev/imasaka0909/articles/c25de921e17984)