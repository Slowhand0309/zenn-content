---
title: "Android Studio Ladybugã«æ›´æ–°ã—ãŸéš›ã«Flutterã§é­é‡ã—ãŸãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼"
emoji: "ğŸ¤¯"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  - "flutter"
  - "android"
  - "androidstudio"
  - "codemagic"
published: true
---
# æ¦‚è¦

Android Studio ã‚’ Ladybugã«æ›´æ–°ã—ãŸéš›ã«ã€æ—¢å­˜ã®Flutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§è‰²ã€…ãªãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã«é­é‡ã—ãŸã®ã§ã€ãã®å¯¾å¿œã®ãƒ¡ãƒ¢ã«ãªã‚Šã¾ã™ã€‚

ã‚‚ã£ã¨ã“ã†ä¿®æ­£ã—ãŸæ–¹ãŒã„ã„ã‚ˆã€œãªã©ã‚ã‚Œã°æ•™ãˆã¦é ‚ã‘ã‚‹ã¨åŠ©ã‹ã‚Šã¾ã™ ğŸ™‡

## ç’°å¢ƒ

- Android Studio Ladybug | 2024.2.1 Patch 2

ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼1 ~ 3 ãŒèµ·ããŸç’°å¢ƒ

- Flutter SDK: 3.24.0

ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼4ã¨Codemagicä¸Šã§ã®ã‚¨ãƒ©ãƒ¼ãŒèµ·ããŸç’°å¢ƒ

- Flutter SDK: 3.27.1

## ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ 1

ã‚¨ãƒ©ãƒ¼ã¯çªç„¶ã«â€¦

```text
Execution failed for task ':flutter_image_compress_common:compileDebugJavaWithJavac'.
> Could not resolve all files for configuration ':flutter_image_compress_common:androidJdkImage'.
   > Failed to transform core-for-system-modules.jar to match attributes {artifactType=_internal_android_jdk_image, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.
      > Execution failed for JdkImageTransform: /Users/xxxxx/Develop/android-sdk/platforms/android-31/core-for-system-modules.jar.
         > Error while executing process /Applications/Android Studio.app/Contents/jbr/Contents/Home/bin/jlink with arguments
           {--module-path /Users/xxxxx/.gradle/caches/transforms-3/be939630b59b5e5390087ebc288d398f/transformed/output/temp/jmod --add-modules java.base
           --output /Users/xxxxx/.gradle/caches/transforms-3/be939630b59b5e5390087ebc288d398f/transformed/output/jdkImage --disable-plugin system-modules}
```

https://stackoverflow.com/questions/69619829/could-not-resolve-all-files-for-configuration-appandroidjdkimage

ã²ã¨ã¾ãšğŸ‘†ã‚’å‚è€ƒã« `android/gradle/wrapper/gradle-wrapper.properties` ã‚’ä»¥ä¸‹ã«æ›´æ–°

```text
distributionUrl=https\://services.gradle.org/distributions/gradle-8.4-bin.zip
```

æ¬¡ã« `android/build.gradle` ã® `classpath 'com.android.tools.build:gradle` ã‚’ä»¥ä¸‹ã«æ›´æ–°

```groovy
classpath 'com.android.tools.build:gradle:8.3.2'
```

â€» ã¾ãŸã¯ `android/settings.gradle` ã® `plugins` ã«ä»¥ä¸‹ã‚’è¿½åŠ 

```groovy
id "com.android.application" version "8.3.2" apply false
```

ã™ã‚‹ã¨ã€ä»Šåº¦ã¯åˆ¥ã®ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿâ€¦ ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ 2 ã¸ç¶šã

## ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ 2

```text
Execution failed for task ':app:processDevDebugMainManifest'.
> Manifest merger failed : Attribute property#android.adservices.AD_SERVICES_CONFIG@resource value=(@xml/gma_ad_services_config) from [com.google.android.gms:play-services-ads-lite:23.0.0] AndroidManifest.xml:92:13-59
    is also present at [com.google.android.gms:play-services-measurement-api:22.1.2] AndroidManifest.xml:32:13-58 value=(@xml/ga_ad_services_config).
    Suggestion: add 'tools:replace="android:resource"' to <property> element at AndroidManifest.xml to override.
```

https://stackoverflow.com/questions/78085458/manifest-merger-failed-with-agp-8-3-0

`8.2.2` ã ã¨èµ·ããªã„ã¿ãŸã„ãªã®ã§ä¸€æ—¦æˆ»ã™ã€‚

```groovy
classpath 'com.android.tools.build:gradle:8.2.2'
```

ã™ã‚‹ã¨åˆ¥ã®ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿâ€¦ ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ 3 ã¸ç¶šã

## ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ 3

```text
Execution failed for task ':app:packageDevDebug'.
> A failure occurred while executing com.android.build.gradle.tasks.PackageAndroidArtifact$IncrementalSplitterRunnable
   > java.lang.OutOfMemoryError (no error message)
```

https://github.com/facebook/react-native/issues/30729#issuecomment-833516218

ã²ã¨ã¾ãš `org.gradle.jvmargs=-Xmx4g` ã«ã—ã¦ãƒ“ãƒ«ãƒ‰ãŒé€šã‚‹ã‚ˆã†ã«ã‚Šã¾ã—ãŸã€‚`-Xmx4g` ã®éƒ¨åˆ†ã¯è¦èª¿æ•´ã€‚

## ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ 4

```text
A problem occurred configuring project ':isar_flutter_libs'.
> Could not create an instance of type com.android.build.api.variant.impl.LibraryVariantBuilderImpl.
   > Namespace not specified. Specify a namespace in the module's build file. See https://d.android.com/r/tools/upgrade-assistant/set-namespace for information about setting the namespace.

     If you've specified the package attribute in the source AndroidManifest.xml, you can use the AGP Upgrade Assistant to migrate to the namespace value in the build file. Refer to https://d.android.com/r/tools/upgrade-assistant/agp-upgrade-assistant for general information about using the AGP Upgrade Assistant.

```

https://github.com/flutter/flutter/issues/125181#issuecomment-1554429210

ğŸ‘†ã®å¯¾å¿œã‚’å®Ÿæ–½ã—ã¦ã‚ã’ã‚‹ã¨ãƒ“ãƒ«ãƒ‰ãŒé€šã‚Šã¾ã—ãŸ ğŸ‰

## Codemagicä¸Šã§ã®ã‚¨ãƒ©ãƒ¼

æœ€å¾Œã«CIã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ãŸåˆ†ã®ä¿®æ­£ã«ãªã‚Šã¾ã™ã€‚

ã‚¨ãƒ©ãƒ¼å†…å®¹

```text
Your project is configured with Android NDK 23.1.7779620, but the following plugin(s) depend on a different Android NDK version:
...
Fix this issue by using the highest Android NDK version (they are backward compatible).
Add the following to /Users/builder/clone/android/app/build.gradle:

    android {
        ndkVersion = "25.1.8937393"
        ...
    }
...

ERROR: /Users/builder/clone/build/app/intermediates/merged_java_res/release/base.jar: R8: com.android.tools.r8.ResourceException: com.android.tools.r8.internal.vc: I/O exception while reading '/Users/builder/clone/build/app/intermediates/merged_java_res/release/base.jar': /Users/builder/clone/build/app/intermediates/merged_java_res/release/base.jar

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':app:minifyReleaseWithR8'.
> A failure occurred while executing com.android.build.gradle.internal.tasks.R8Task$R8Runnable
   > Compilation failed to complete, origin: /Users/builder/clone/build/app/intermediates/merged_java_res/release/base.jar

```

https://stackoverflow.com/questions/78026765/error-when-minifying-android-app-with-r8-after-upgrading-android-gradle-plugin-t

è²¼ã‚‰ã‚Œã¦ã‚ã£ãŸStackOverflowã®ãƒªãƒ³ã‚¯ã ã¨ `tasks.whenTaskAdded` ãŒåŸå› ã¨æ›¸ã‹ã‚Œã¦ã‚ã‚‹æ§˜ã§ã™â€¦ ğŸ¤”

https://stackoverflow.com/questions/78142862/error-execution-failed-for-task-appminifyreleasewithr8

ğŸ‘†minifyã‚’falseã«ã™ã‚‹ã¨ã„ã„ã‚‰ã—ã„ãŒã€æš«å®šå¯¾å¿œã¿ãŸã„ã§ã™ã€‚

â†’ å®Ÿéš›ã«falseã«ã—ã¦codemagicã‚’èµ°ã‚‰ã›ã‚‹ã¨é€šã‚Šã¾ã—ãŸï¼

æ ¹æœ¬å¯¾å¿œãŒèª¿ã¹ã¦ã‚‚åˆ†ã‹ã‚‰ãšã€‚ä½•ã‹åˆ†ã‹ã‚‹æ–¹ã„ãŸã‚‰æ•™ãˆã¦é ‚ã‘ã‚‹ã¨åŠ©ã‹ã‚Šã¾ã™!
