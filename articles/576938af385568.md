---
title: "ã€Androidã€‘ãƒ©ã‚¤ãƒ–ãƒ©ãƒªCalendarã‚’è©¦ã™"
emoji: "ğŸ“†"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  - "android"
  - "jetpackcompose"
  - "kotlin"
published: true
---

# [Calendar](https://github.com/kizitonwose/Calendar)

> Androidç”¨ã®é«˜åº¦ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€ãƒ“ãƒ¥ãƒ¼ãƒ»ã‚·ã‚¹ãƒ†ãƒ ã«ã¯RecyclerViewã€åˆæˆã«ã¯LazyRow/LazyColumnãŒæ¡ç”¨ã•ã‚Œã¦ã„ã‚‹ã€‚

Androidã‚¢ãƒ—ãƒªå†…ã§ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’æ‰±ã†éš›ã«ä¾¿åˆ©ãª `Calendar` ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è»½ãè©¦ã—ãŸéš›ã®ãƒ¡ãƒ¢ã«ãªã‚Šã¾ã™ã€‚

## å‹•ä½œç¢ºèªç’°å¢ƒ

```bash
$ sw_vers
ProductName: macOS
ProductVersion: 13.4
BuildVersion: 22F66
```

Android Studio Giraffe | 2022.3.1 Patch 1

## Calendarãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ©Ÿèƒ½

- å˜ä¸€é¸æŠã€è¤‡æ•°é¸æŠã€ç¯„å›²é¸æŠ - ãŠå¥½ã¿ã®æ–¹æ³•ã§æ—¥ä»˜é¸æŠã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹
- é€±ã¾ãŸã¯æœˆãƒ¢ãƒ¼ãƒ‰ - é€±ãƒ™ãƒ¼ã‚¹ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã€ã¾ãŸã¯é€šå¸¸ã®æœˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’è¡¨ç¤º
- ä¸€éƒ¨ã®æ—¥ä»˜ã‚’ç„¡åŠ¹ã«ã—ã¦é¸æŠã§ããªã„ã‚ˆã†ã«ã™ã‚‹
- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®æ—¥ä»˜ç¯„å›²ã‚’åˆ¶é™ã™ã‚‹
- Custom date view/composable
- Custom calendar view/composable
- ä»»æ„ã®æ—¥ã‚’é€±ã®åˆæ—¥ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹
- æ°´å¹³ã¾ãŸã¯å‚ç›´ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

[ã“ã¡ã‚‰](https://github.com/kizitonwose/Calendar/blob/main/docs/Compose.md#compose-versions)ã«è¨˜è¼‰ãŒã‚ã‚‹é€šã‚Šã€ComposeUIã®Versionã«åˆã‚ã›ã¦Calendarã®Versionã‚‚æŒ‡å®šã™ã‚‹ã€‚

ä»Šå› `compose bom` ãŒ `2022.10.00` ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§[ã“ã¡ã‚‰](https://developer.android.com/jetpack/compose/bom/bom-mapping?hl=ja)å‚ç…§ã™ã‚‹ã¨ComposeUIã®Versionã¯ 1.3.0 ãªã®ã§ä»Šå›ã¯ `2.2.0` ã‚’ä½¿ã„ã¾ã™ã€‚

`libs.versions.toml` ã«ä»¥ä¸‹ã‚’è¿½åŠ 

```toml
[versions]
calendar-view = "2.2.0"

[libraries]
calendar-view = { module = "com.kizitonwose.calendar:compose", version.ref = "calendar-view" }
```

`app/build.gradle.kts` ã«ä»¥ä¸‹ã‚’è¿½åŠ 

```kotlin
dependencies {
  implementation(libs.calendar.view)
}
```

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

[Calendar/docs/Compose.md at main Â· kizitonwose/Calendar](https://github.com/kizitonwose/Calendar/blob/main/docs/Compose.md)

â†‘ã‚’å‚è€ƒã«ã™ã™ã‚ã¦ã„ãã¾ã™ã€‚

## ä¸»ãª4ã¤ã®Composable

1. HorizontalCalendar
   - æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®æœˆå˜ä½ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
2. VerticalCalendar
   - ç¸¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®æœˆå˜ä½ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
3. WeekCalendar
   - æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®é€±å˜ä½ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
4. HeatMapCalendar
   - GitHub ã®è‰ã®ã‚ã‚Œ

### ã¾ãšã¯ `HorizontalCalendar` ã§æœ€ä½é™ã®å®Ÿè£…ã‚’è©¦ã—ã¦ã¿ã‚‹

```kotlin
@Composable
fun CalendarCompose() {
    val currentMonth = remember { YearMonth.now() }
    val startMonth = remember { currentMonth.minusMonths(100) } // Adjust as needed
    val endMonth = remember { currentMonth.plusMonths(100) } // Adjust as needed
    val firstDayOfWeek = remember { firstDayOfWeekFromLocale() } // Available from the library

    val state = rememberCalendarState(
        startMonth = startMonth,
        endMonth = endMonth,
        firstVisibleMonth = currentMonth,
        firstDayOfWeek = firstDayOfWeek
    )

    Column(modifier = Modifier.fillMaxSize()) {
        HorizontalCalendar(
            state = state,
            dayContent = { Day(it) }
        )
    }
}

@Composable
private fun Day(day: CalendarDay) {
    Box(
        modifier = Modifier
            .aspectRatio(1f), // This is important for square sizing!
        contentAlignment = Alignment.Center
    ) {
        Text(text = day.date.dayOfMonth.toString())
    }
}
```

ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§å‹•ä½œã—ã¦ã¿ãŸã‚‚ã®ãŒâ†“ã«ãªã‚Šã¾ã™ã€‚

![image1.gif](/images/576938af385568/image1.gif =250x)

### VerticalCalendar, WeekCalendar, HeatMapCalendar ã®æŒ™å‹•

æ¬¡ã«å„ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ä½¿ã£ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

- VerticalCalendar
    HorizontalCalendarã‚’VerticalCalendarã«å¤‰æ›´ã—ãŸã ã‘ã®ã‚‚ã®â†“
    ![image2.gif](/images/576938af385568/image2.gif =250x)

- WeekCalendar

    ```kotlin
    @Composable
    fun WeekCalendarSimple() {
        val currentDate = remember { LocalDate.now() }
        val currentMonth = remember { YearMonth.now() }
        val startDate = remember { currentMonth.atStartOfMonth() } // Adjust as needed
        val endDate = remember { currentMonth.atEndOfMonth() } // Adjust as needed
        val firstDayOfWeek = remember { firstDayOfWeekFromLocale() } // Available from the library
    
        val state = rememberWeekCalendarState(
            startDate = startDate,
            endDate = endDate,
            firstVisibleWeekDate = currentDate,
            firstDayOfWeek = firstDayOfWeek
        )
    
        Column(modifier = Modifier.fillMaxSize()) {
            WeekCalendar(
                state = state,
                dayContent = { Day(it) }
            )
        }
    }
    
    @Composable
    private fun Day(day: WeekDay) {
        Box(
            modifier = Modifier
                .aspectRatio(1f), // This is important for square sizing!
            contentAlignment = Alignment.Center
        ) {
            Text(text = day.date.dayOfMonth.toString())
        }
    }
    ```

    ![image3.gif](/images/576938af385568/image3.gif =250x)

- HeatMapCalendar

    ```kotlin
    @Composable
    fun HeatMapCalendarSimple() {
        val currentMonth = remember { YearMonth.now() }
        val endDate = remember { LocalDate.now() }
        val startDate = remember { endDate.minusMonths(12) }
    
        val state = rememberHeatMapCalendarState(
            startMonth = startDate.yearMonth,
            endMonth = endDate.yearMonth,
            firstVisibleMonth = endDate.yearMonth,
            firstDayOfWeek = firstDayOfWeekFromLocale(),
        )
    
        Column(modifier = Modifier.fillMaxSize()) {
            HeatMapCalendar(
                state = state,
                dayContent = { day, week -> Day(day, startDate, endDate, week) }
            )
        }
    }
    
    @Composable
    private fun Day(
        day: CalendarDay,
        startDate: LocalDate,
        endDate: LocalDate,
        week: HeatMapWeek,
    ) {
        val weekDates = week.days.map { it.date }
        if (day.date in startDate..endDate) {
            LevelBox(Color.Green)
        } else if (weekDates.contains(startDate)) {
            LevelBox(Color.Transparent)
        }
    }
    
    @Composable
    private fun LevelBox(color: Color) {
        Box(
            modifier = Modifier
                .size(18.dp) // Must set a size on the day.
                .padding(2.dp)
                .clip(RoundedCornerShape(2.dp))
                .background(color = color)
        )
    }
    ```

    ![image4.gif](/images/576938af385568/image4.gif =250x)

### WeekTitleã‚’ã¤ã‘ã¦ã¿ã‚‹

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯[ã“ã¡ã‚‰](https://github.com/kizitonwose/Calendar/blob/main/docs/Compose.md#first-day-of-the-week-and-day-of-week-titles)

```kotlin
@Composable
fun HorizontalCalendarWeekTitle() {
    val currentMonth = remember { YearMonth.now() }
    val startMonth = remember { currentMonth.minusMonths(100) } // Adjust as needed
    val endMonth = remember { currentMonth.plusMonths(100) } // Adjust as needed
    val daysOfWeek = remember { daysOfWeek() }

    val state = rememberCalendarState(
        startMonth = startMonth,
        endMonth = endMonth,
        firstVisibleMonth = currentMonth,
        firstDayOfWeek = daysOfWeek.first()
    )

    Column(modifier = Modifier.fillMaxSize()) {
        DaysOfWeekTitle(daysOfWeek = daysOfWeek)
        HorizontalCalendar(
            state = state,
            dayContent = { Day(it) }
        )
    }
}

@Composable
fun DaysOfWeekTitle(daysOfWeek: List<DayOfWeek>) {
    Row(modifier = Modifier.fillMaxWidth()) {
        for (dayOfWeek in daysOfWeek) {
            Text(
                modifier = Modifier.weight(1f),
                textAlign = TextAlign.Center,
                text = dayOfWeek.getDisplayName(TextStyle.SHORT, Locale.getDefault()),
            )
        }
    }
}

@Composable
private fun Day(day: CalendarDay) {
    Box(
        modifier = Modifier
            .aspectRatio(1f), // This is important for square sizing!
        contentAlignment = Alignment.Center
    ) {
        Text(text = day.date.dayOfMonth.toString())
    }
}
```

ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§å‹•ä½œã—ã¦ã¿ãŸã‚‚ã®ãŒâ†“ã«ãªã‚Šã¾ã™ã€‚

![image5.gif](/images/576938af385568/image5.gif =250x)

# æ„Ÿæƒ³

è»½ãè©¦ã—ãŸã ã‘ã§ã™ãŒã€ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ™ãƒ¼ã‚¹ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’å…ƒã«ã€
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé€šã‚Šçµæ§‹ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ€§ãŒé«˜ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã ã¨æ„Ÿã˜ã¾ã—ãŸã€‚
ã¾ãŸæ·±æ˜ã‚Šã—ãŸéš›ã¯åˆ¥é€”è¨˜äº‹ã‚’æ›¸ã“ã†ã¨æ€ã„ã¾ã™ã€‚
